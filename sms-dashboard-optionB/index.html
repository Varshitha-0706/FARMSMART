<!DOCTYPE html>
<html lang="te">

<head>
    <meta charset="UTF-8">
    <title>Candidate SMS Portal</title>
    <style>
        body {
            font-family: system-ui, sans-serif;
            max-width: 700px;
            margin: 20px auto;
        }

        textarea,
        button {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            font-size: 16px;
        }

        .card {
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 16px;
            margin-top: 20px;
        }

        .history-item {
            border-bottom: 1px solid #eee;
            padding: 8px 0;
        }

        .ok {
            color: green;
            font-weight: bold;
        }

        .err {
            color: red;
        }
    </style>
</head>

<body>
    <h1>üì© ‡∞Ö‡∞≠‡±ç‡∞Ø‡∞∞‡±ç‡∞•‡∞ø SMS ‡∞™‡∞Ç‡∞™‡±Å</h1>

    <!-- Step 1: English input -->
    <label>Type Message (English)</label>
    <textarea id="msgEnglish" placeholder="Enter message in English"></textarea>

    <!-- Step 2: Translate -->
    <button onclick="translateMessage()">Translate to Telugu</button>

    <!-- Step 3: Telugu preview -->
    <label>Translated Message (Telugu)</label>
    <textarea id="msgTelugu" readonly></textarea>

    <!-- Step 4: Send SMS -->
    <button onclick="openFast2SMS()">Send SMS via Fast2SMS</button>
    <div id="status"></div>

    <!-- Step 5: History -->
    <div class="card">
        <h2>üïë SMS ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞</h2>
        <div id="history"></div>
    </div>

    <script>
        async function translateMessage() {
            const english = document.getElementById('msgEnglish').value.trim();
            if (!english) return alert("Please type a message in English first!");

            // Using free Google Translate API
            try {
                const res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=te&dt=t&q=${encodeURIComponent(english)}`);
                const data = await res.json();
                const telugu = data[0][0][0];
                document.getElementById('msgTelugu').value = telugu;
            } catch (err) {
                alert("Translation failed. Try again.");
            }
        }

        function openFast2SMS() {
            const msgTelugu = document.getElementById('msgTelugu').value.trim();
            if (!msgTelugu) return alert("Translate the message first!");

            // Open Fast2SMS dashboard
            window.open("https://www.fast2sms.com", "_blank");

            // Show success creatively
            const status = document.getElementById('status');
            status.innerHTML = `<p class='ok'>‚úÖ ‡∞∏‡∞Ç‡∞¶‡±á‡∞∂‡∞Ç Fast2SMS ‡∞≤‡±ã‡∞ï‡∞ø ‡∞§‡∞∞‡∞≤‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Ö‡∞ï‡±ç‡∞ï‡∞° ‡∞™‡∞Ç‡∞™‡∞Ç‡∞°‡∞ø!</p>`;

            // Save to history
            saveHistory(msgTelugu);
        }

        function saveHistory(msg) {
            const now = new Date();
            const timeStr = now.toLocaleString('te-IN', { dateStyle: 'medium', timeStyle: 'short' });

            const history = JSON.parse(localStorage.getItem('smsHistory') || "[]");
            history.unshift({ message: msg, time: timeStr });
            localStorage.setItem('smsHistory', JSON.stringify(history));
            renderHistory();
        }

        function renderHistory() {
            const container = document.getElementById('history');
            container.innerHTML = "";
            const history = JSON.parse(localStorage.getItem('smsHistory') || "[]");
            history.forEach(item => {
                container.innerHTML += `<div class='history-item'>üìù ${item.message}<br/><small>üìÖ ${item.time}</small></div>`;
            });
        }

        // Load history on page load
        renderHistory();
    </script>
</body>

</html>